<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="/builded-/_next/static/css/b15c17d40d707464.css" data-precedence="next"/><link rel="stylesheet" href="/builded-/_next/static/css/153fc8fc778e61d8.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/builded-/_next/static/chunks/webpack-1bc47428789b7fa5.js"/><script src="/builded-/_next/static/chunks/4bd1b696-088a62ea50eda1cd.js" async=""></script><script src="/builded-/_next/static/chunks/1684-c828f2c93dd9e1e4.js" async=""></script><script src="/builded-/_next/static/chunks/main-app-210b856684846763.js" async=""></script><script src="/builded-/_next/static/chunks/app/layout-156dfeb232451b2a.js" async=""></script><script src="/builded-/_next/static/chunks/3775-b238f2da9e3bf1c9.js" async=""></script><script src="/builded-/_next/static/chunks/app/not-found-dc052bfc877ac7e8.js" async=""></script><script src="/builded-/_next/static/chunks/9567-6f13e14e3e2f5e9e.js" async=""></script><script src="/builded-/_next/static/chunks/2981-eb50beb4c5dc51c2.js" async=""></script><script src="/builded-/_next/static/chunks/1954-11af90ae075b3ce0.js" async=""></script><script src="/builded-/_next/static/chunks/app/docs/semaine-2/it/sensor-subscriber/page-f8ef32a2303138fc.js" async=""></script><title>TRC Competition Documentation</title><meta name="description" content="Documentation for TRC Robotics Competition - From Learning to Excellence"/><meta name="generator" content="v0.app"/><script src="/builded-/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body class="font-sans antialiased"><script>((e,t,r,n,o,a,i,l)=>{let u=document.documentElement,s=["light","dark"];function c(t){var r;(Array.isArray(e)?e:[e]).forEach(e=>{let r="class"===e,n=r&&a?o.map(e=>a[e]||e):o;r?(u.classList.remove(...n),u.classList.add(a&&a[t]?a[t]:t)):u.setAttribute(e,t)}),r=t,l&&s.includes(r)&&(u.style.colorScheme=r)}if(n)c(n);else try{let e=localStorage.getItem(t)||r,n=i&&"system"===e?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e;c(n)}catch(e){}})("class","theme","system",null,["light","dark"],null,true,true)</script><div class="min-h-screen bg-background"><nav class="fixed top-0 left-0 right-0 z-50 bg-background/70 backdrop-blur-3xl border-b border-border/40"><div class="container mx-auto px-4"><div class="flex items-center justify-between h-16 md:h-20"><div class="flex items-center gap-3"><div class="w-10 h-10 rounded-xl bg-gradient-to-br from-primary to-chart-1 flex items-center justify-center"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-trophy w-6 h-6 text-white"><path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"></path><path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"></path><path d="M4 22h16"></path><path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"></path><path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"></path><path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"></path></svg></div><div class="hidden md:block"><div class="text-lg font-bold bg-gradient-to-r from-primary to-chart-1 bg-clip-text text-transparent">TRC Competition</div><div class="text-xs text-muted-foreground">Documentation Technique</div></div></div><div class="hidden md:flex items-center gap-2"><button data-slot="button" class="inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-9 px-4 py-2 has-[&gt;svg]:px-3 gap-2"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-house w-4 h-4"><path d="M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8"></path><path d="M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path></svg>Accueil</button><button data-slot="button" class="inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-9 px-4 py-2 has-[&gt;svg]:px-3 gap-2"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-file-text w-4 h-4"><path d="M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"></path><path d="M14 2v4a2 2 0 0 0 2 2h4"></path><path d="M10 9H8"></path><path d="M16 13H8"></path><path d="M16 17H8"></path></svg>Pré-sélection</button><button data-slot="button" class="inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-9 px-4 py-2 has-[&gt;svg]:px-3 gap-2"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-trophy w-4 h-4"><path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"></path><path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"></path><path d="M4 22h16"></path><path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"></path><path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"></path><path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"></path></svg>Finale</button></div><div class="md:hidden flex items-center gap-2"><button data-slot="button" class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 size-9"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-menu w-5 h-5"><line x1="4" x2="20" y1="12" y2="12"></line><line x1="4" x2="20" y1="6" y2="6"></line><line x1="4" x2="20" y1="18" y2="18"></line></svg></button></div></div></div></nav><div class="flex pt-16 md:pt-20"><aside class="sticky top-16 md:top-20 w-16 h-[calc(100vh-4rem)] md:h-[calc(100vh-5rem)] bg-sidebar/95 backdrop-blur-lg border-r border-sidebar-border/60 z-40 shadow-2xl flex-shrink-0"><div class="flex flex-col h-full"><div class="p-3 border-b border-sidebar-border/60"><button data-slot="button" class="inline-flex items-center whitespace-nowrap text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 has-[&gt;svg]:px-2.5 w-full justify-center px-0"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-house h-5 w-5 flex-shrink-0"><path d="M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8"></path><path d="M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path></svg></button></div><div class="flex-1 min-h-0 overflow-y-auto overflow-x-hidden"><nav class="p-3 space-y-2"><div><button data-slot="button" class="inline-flex items-center whitespace-nowrap text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 has-[&gt;svg]:px-2.5 w-full justify-center px-0"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-circle-check h-5 w-5 flex-shrink-0"><circle cx="12" cy="12" r="10"></circle><path d="m9 12 2 2 4-4"></path></svg></button></div><div><button data-slot="button" class="inline-flex items-center whitespace-nowrap text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 has-[&gt;svg]:px-2.5 w-full justify-center px-0"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-target h-5 w-5 flex-shrink-0"><circle cx="12" cy="12" r="10"></circle><circle cx="12" cy="12" r="6"></circle><circle cx="12" cy="12" r="2"></circle></svg></button></div></nav></div></div></aside><main class="flex-1 min-w-0"><section class="transition-all duration-700 ease-out opacity-0" style="transition-delay:0ms"><section class="relative py-12 bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700"><div class="container mx-auto px-4"><div class="max-w-4xl mx-auto"><div class="flex items-center gap-2 text-sm text-muted-foreground mb-4"><a class="hover:text-foreground transition-colors" href="#">Documentation Informatique</a><span>/</span><span>sensor_subscriber.py</span></div><div class="flex items-center gap-4 mb-6"><div class="w-12 h-12 rounded-lg bg-gray-100 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 flex items-center justify-center"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-download w-6 h-6 text-gray-600 dark:text-gray-400"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" x2="12" y1="15" y2="3"></line></svg></div><div><h1 class="text-3xl md:text-4xl font-bold"><code>sensor_subscriber.py</code></h1><p class="text-muted-foreground">Nœud ROS 2 pour la réception, la validation et la sauvegarde de données de capteur.</p></div></div><div class="flex flex-wrap gap-2"><span data-slot="badge" class="inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&amp;&gt;svg]:size-3 gap-1 [&amp;&gt;svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden border-transparent bg-secondary text-secondary-foreground [a&amp;]:hover:bg-secondary/90">Python</span><span data-slot="badge" class="inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&amp;&gt;svg]:size-3 gap-1 [&amp;&gt;svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden text-foreground [a&amp;]:hover:bg-accent [a&amp;]:hover:text-accent-foreground">ROS 2</span><span data-slot="badge" class="inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&amp;&gt;svg]:size-3 gap-1 [&amp;&gt;svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden text-foreground [a&amp;]:hover:bg-accent [a&amp;]:hover:text-accent-foreground">Subscriber</span></div></div></div></section></section><div class="border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 sticky top-16 md:top-20 z-30"><div class="container mx-auto px-4"><div class="flex items-center justify-between py-3 max-w-4xl mx-auto"><a href="/builded-/docs/semaine-2/it/sensor-publisher/"><button data-slot="button" class="inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-left w-4 h-4 mr-2"><path d="m12 19-7-7 7-7"></path><path d="M19 12H5"></path></svg>Sensor Publisher</button></a><a href="/builded-/docs/semaine-2/it/streamlit-dashboard/"><button data-slot="button" class="inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 h-8 rounded-md gap-1.5 px-3 has-[&gt;svg]:px-2.5">Streamlit Dashboard<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-right w-4 h-4 ml-2"><path d="M5 12h14"></path><path d="m12 5 7 7-7 7"></path></svg></button></a></div></div></div><div class="container mx-auto px-4 py-8"><div class="max-w-4xl mx-auto space-y-8"><section class="transition-all duration-700 ease-out translate-y-12 opacity-0" style="transition-delay:0ms"><div data-slot="card" class="bg-card text-card-foreground flex flex-col gap-6 rounded-xl py-6 shadow-sm border border-gray-200 dark:border-gray-700"><div data-slot="card-header" class="@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6 bg-white dark:bg-gray-900/50 border-b border-gray-200 dark:border-gray-700"><div data-slot="card-title" class="leading-none font-semibold flex items-center gap-2 text-gray-900 dark:text-gray-100"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-book-open w-5 h-5 text-gray-600 dark:text-gray-400"><path d="M12 7v14"></path><path d="M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z"></path></svg>Description générale</div></div><div data-slot="card-content" class="p-6"><div class="text-gray-700 dark:text-gray-300 leading-relaxed"><p>Ce script définit un <strong>nœud ROS 2</strong> nommé <code>sensor_subscriber</code> qui <strong>écoute</strong> les messages publiés sur le topic <code>/sensor_data</code>.</p><p class="mt-4">Il lit les mesures de température, d&#x27;humidité et de pression, vérifie si elles sont dans des <strong>plages prédéfinies</strong>, affiche des <strong>logs d&#x27;alerte</strong> si nécessaire, puis <strong>enregistre les dernières valeurs reçues</strong> dans un fichier JSON (<code>latest_sensor_data.json</code>).</p><p class="mt-4 bg-gray-50 dark:bg-gray-900/30 border border-gray-200 dark:border-gray-700 rounded p-3 text-sm">Ce fichier sert ensuite d’entrée à l’application <strong>Streamlit</strong> pour l’affichage des données en temps réel.</p></div></div></div></section><div data-orientation="horizontal" role="none" data-slot="separator" class="bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px border-gray-200 dark:border-gray-700"></div><section class="transition-all duration-700 ease-out translate-y-12 opacity-0" style="transition-delay:100ms"><div data-slot="card" class="bg-card text-card-foreground flex flex-col gap-6 rounded-xl py-6 shadow-sm border border-gray-200 dark:border-gray-700"><div data-slot="card-header" class="@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6 bg-white dark:bg-gray-900/50 border-b border-gray-200 dark:border-gray-700"><div data-slot="card-title" class="leading-none font-semibold flex items-center gap-2 text-gray-900 dark:text-gray-100"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-workflow w-5 h-5 text-gray-600 dark:text-gray-400"><rect width="8" height="8" x="3" y="3" rx="2"></rect><path d="M7 11v4a2 2 0 0 0 2 2h4"></path><rect width="8" height="8" x="13" y="13" rx="2"></rect></svg>Détail par bloc de code</div><div data-slot="card-description" class="text-sm text-gray-600 dark:text-gray-400">Analyse de chaque partie du script du subscriber.</div></div><div data-slot="card-content" class="space-y-8 p-6"><div class="bg-white dark:bg-gray-900/50 border border-gray-200 dark:border-gray-700 rounded-lg p-4"><h4 class="font-medium text-gray-900 dark:text-gray-100 mb-3">1- Importations</h4><div class="bg-gray-900 dark:bg-gray-950 rounded-lg p-4 mb-4 overflow-x-auto relative border border-gray-700"><pre class="text-sm text-gray-100"><code>import rclpy
from rclpy.node import Node
from std_msgs.msg import Float32MultiArray
import json
from datetime import datetime</code></pre></div><div class="bg-gray-50 dark:bg-gray-900/30 border border-gray-200 dark:border-gray-700 rounded p-3 text-sm"><p class="font-semibold text-gray-700 dark:text-gray-300 mb-2">Fonction : Importe les modules nécessaires</p><ul class="list-disc pl-5 space-y-1 text-gray-600 dark:text-gray-400"><li><code>rclpy</code> &amp; <code>Node</code> : pour créer un nœud ROS 2,</li><li><code>Float32MultiArray</code> : type de message ROS attendu,</li><li><code>json</code> : pour sauvegarder les données vers un fichier JSON,</li><li><code>datetime</code> : pour ajouter un timestamp ISO aux données.</li></ul></div></div><div class="bg-white dark:bg-gray-900/50 border border-gray-200 dark:border-gray-700 rounded-lg p-4"><h4 class="font-medium text-gray-900 dark:text-gray-100 mb-3">2- Classe <code>SensorSubscriber</code></h4><div class="bg-gray-900 dark:bg-gray-950 rounded-lg p-4 mb-4 overflow-x-auto relative border border-gray-700"><pre class="text-sm text-gray-100"><code>class SensorSubscriber(Node):</code></pre></div><div class="bg-gray-50 dark:bg-gray-900/30 border border-gray-200 dark:border-gray-700 rounded p-3 text-sm"><p class="font-semibold text-gray-700 dark:text-gray-300 mb-2">Fonction :</p><p class="text-gray-600 dark:text-gray-400">Définit un nœud abonné au topic <code>/sensor_data</code>.</p></div></div><div class="bg-white dark:bg-gray-900/50 border border-gray-200 dark:border-gray-700 rounded-lg p-4"><h4 class="font-medium text-gray-900 dark:text-gray-100 mb-3">3- Constructeur <code>__init__</code></h4><div class="bg-gray-900 dark:bg-gray-950 rounded-lg p-4 mb-4 overflow-x-auto relative border border-gray-700"><pre class="text-sm text-gray-100"><code>def __init__(self):
    super().__init__(&#x27;sensor_subscriber&#x27;)
    self.subscription = self.create_subscription(
        Float32MultiArray,
        &#x27;/sensor_data&#x27;,
        self.listener_callback,
        10)
    ...</code></pre></div><div class="bg-gray-50 dark:bg-gray-900/30 border border-gray-200 dark:border-gray-700 rounded p-3 text-sm"><p class="font-semibold text-gray-700 dark:text-gray-300 mb-2">Fonction :</p><ul class="list-disc pl-5 space-y-1 text-gray-600 dark:text-gray-400"><li>Crée le nœud ROS nommé <code>sensor_subscriber</code>,</li><li>Crée un abonnement au topic <code>/sensor_data</code>,</li><li>Définit les <strong>plages valides</strong> pour chaque mesure :<ul class="list-[&#x27;-_&#x27;] pl-5 mt-1"><li>Température : 15.0–35.0 °C</li><li>Humidité : 30.0–70.0 %</li><li>Pression : 950.0–1050.0 hPa</li></ul></li></ul></div></div><div class="bg-white dark:bg-gray-900/50 border border-gray-200 dark:border-gray-700 rounded-lg p-4"><h4 class="font-medium text-gray-900 dark:text-gray-100 mb-3">4- Méthode <code>listener_callback</code></h4><div class="bg-gray-900 dark:bg-gray-950 rounded-lg p-4 mb-4 overflow-x-auto relative border border-gray-700"><pre class="text-sm text-gray-100"><code>def listener_callback(self, msg: Float32MultiArray):</code></pre></div><div class="bg-gray-50 dark:bg-gray-900/30 border border-gray-200 dark:border-gray-700 rounded p-3 text-sm"><p class="font-semibold text-gray-700 dark:text-gray-300 mb-2">Fonction : Fonction appelée à chaque message reçu. Elle :</p><ul class="list-disc pl-5 space-y-1 text-gray-600 dark:text-gray-400"><li>Vérifie que le message contient bien <strong>3 éléments</strong> (temp, hum, pres).</li><li>Vérifie si chaque mesure est dans sa plage normale.</li><li>Affiche des <strong>logs d’erreur</strong> si l’une des valeurs est hors plage.</li><li>Crée un dictionnaire structuré avec les données et un <strong>timestamp ISO</strong>.</li><li>Enregistre ce dictionnaire dans un fichier JSON (<code>latest_sensor_data.json</code>).</li></ul></div></div><div class="bg-white dark:bg-gray-900/50 border border-gray-200 dark:border-gray-700 rounded-lg p-4"><h4 class="font-medium text-gray-900 dark:text-gray-100 mb-3 flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-square-check-big w-4 h-4"><path d="M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5"></path><path d="m9 11 3 3L22 4"></path></svg> 5- Vérification des valeurs</h4><div class="bg-gray-900 dark:bg-gray-950 rounded-lg p-4 mb-4 overflow-x-auto relative border border-gray-700"><pre class="text-sm text-gray-100"><code>temp_ok = self.temp_range[0] &lt;= temp &lt;= self.temp_range[1]
hum_ok = self.hum_range[0] &lt;= hum &lt;= self.hum_range[1]
pres_ok = self.pres_range[0] &lt;= pres &lt;= self.pres_range[1]</code></pre></div><div class="bg-gray-50 dark:bg-gray-900/30 border border-gray-200 dark:border-gray-700 rounded p-3 text-sm"><p class="font-semibold text-gray-700 dark:text-gray-300 mb-2">Fonction :</p><p class="text-gray-600 dark:text-gray-400">Vérifie que chaque mesure se situe dans les plages prédéfinies.</p></div></div><div class="bg-white dark:bg-gray-900/50 border border-gray-200 dark:border-gray-700 rounded-lg p-4"><h4 class="font-medium text-gray-900 dark:text-gray-100 mb-3 flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-save w-4 h-4"><path d="M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"></path><path d="M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7"></path><path d="M7 3v4a1 1 0 0 0 1 1h7"></path></svg> 6- Sauvegarde JSON</h4><div class="bg-gray-900 dark:bg-gray-950 rounded-lg p-4 mb-4 overflow-x-auto relative border border-gray-700"><pre class="text-sm text-gray-100"><code>sensor_data = {
    &#x27;temperature&#x27;: float(temp),
    &#x27;humidity&#x27;: float(hum),
    &#x27;pressure&#x27;: float(pres),
    &#x27;timestamp&#x27;: datetime.now().isoformat(),
    &#x27;temp_ok&#x27;: temp_ok,
    &#x27;hum_ok&#x27;: hum_ok,
    &#x27;pres_ok&#x27;: pres_ok
}
with open(&#x27;latest_sensor_data.json&#x27;, &#x27;w&#x27;) as f:
    json.dump(sensor_data, f, indent=2)</code></pre></div><div class="bg-gray-50 dark:bg-gray-900/30 border border-gray-200 dark:border-gray-700 rounded p-3 text-sm"><p class="font-semibold text-gray-700 dark:text-gray-300 mb-2">Fonction :</p><ul class="list-disc pl-5 space-y-1 text-gray-600 dark:text-gray-400"><li>Structure les données avec leur statut (<code>ok</code> ou non),</li><li>Ajoute l’heure d’acquisition,</li><li>Écrit le tout dans un fichier JSON utilisé par Streamlit.</li></ul></div></div><div class="bg-white dark:bg-gray-900/50 border border-gray-200 dark:border-gray-700 rounded-lg p-4"><h4 class="font-medium text-gray-900 dark:text-gray-100 mb-3 flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-triangle-alert w-4 h-4"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg> 7- Gestion des erreurs</h4><div class="bg-gray-900 dark:bg-gray-950 rounded-lg p-4 mb-4 overflow-x-auto relative border border-gray-700"><pre class="text-sm text-gray-100"><code>except Exception as e:
    self.get_logger().warning(f&#x27;Erreur sauvegarde: {e}&#x27;)</code></pre></div><div class="bg-gray-50 dark:bg-gray-900/30 border border-gray-200 dark:border-gray-700 rounded p-3 text-sm"><p class="font-semibold text-gray-700 dark:text-gray-300 mb-2">Fonction :</p><p class="text-gray-600 dark:text-gray-400">Si la sauvegarde du fichier échoue (ex: permissions, espace disque), un avertissement est affiché.</p></div></div><div class="bg-white dark:bg-gray-900/50 border border-gray-200 dark:border-gray-700 rounded-lg p-4"><h4 class="font-medium text-gray-900 dark:text-gray-100 mb-3">8- Fonction <code>main</code></h4><div class="bg-gray-900 dark:bg-gray-950 rounded-lg p-4 mb-4 overflow-x-auto relative border border-gray-700"><pre class="text-sm text-gray-100"><code>def main(args=None):
    rclpy.init(args=args)
    node = SensorSubscriber()
    ...</code></pre></div><div class="bg-gray-50 dark:bg-gray-900/30 border border-gray-200 dark:border-gray-700 rounded p-3 text-sm"><p class="font-semibold text-gray-700 dark:text-gray-300 mb-2">Fonction :</p><ul class="list-disc pl-5 space-y-1 text-gray-600 dark:text-gray-400"><li>Initialise ROS 2,</li><li>Instancie et lance le nœud <code>SensorSubscriber</code>,</li><li>Reste actif en attente de messages,</li><li>Libère les ressources proprement à la fermeture (Ctrl+C).</li></ul></div></div></div></div></section><div data-orientation="horizontal" role="none" data-slot="separator" class="bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px border-gray-200 dark:border-gray-700"></div><section class="transition-all duration-700 ease-out translate-y-12 opacity-0" style="transition-delay:100ms"><div data-slot="card" class="bg-card text-card-foreground flex flex-col gap-6 rounded-xl py-6 shadow-sm border border-gray-200 dark:border-gray-700"><div data-slot="card-header" class="@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6 bg-white dark:bg-gray-900/50 border-b border-gray-200 dark:border-gray-700"><div data-slot="card-title" class="leading-none font-semibold flex items-center gap-2 text-gray-900 dark:text-gray-100"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-circle-play w-5 h-5 text-gray-600 dark:text-gray-400"><circle cx="12" cy="12" r="10"></circle><polygon points="10 8 16 12 10 16 10 8"></polygon></svg>Commande d’exécution</div></div><div data-slot="card-content" class="p-6"><div class="bg-gray-900 dark:bg-gray-950 rounded-lg p-4 overflow-x-auto relative border border-gray-700"><span class="absolute top-2 right-2 text-xs text-gray-400">bash</span><pre class="text-sm text-gray-100"><code>source install/setup.bash
ros2 run sensor_data_evaluation sensor_subscriber</code></pre></div></div></div></section><div class="flex items-center justify-between pt-8 border-t"><a href="/builded-/docs/semaine-2/it/sensor-publisher/"><button data-slot="button" class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50 h-9 px-4 py-2 has-[&gt;svg]:px-3"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-left w-4 h-4 mr-2"><path d="m12 19-7-7 7-7"></path><path d="M19 12H5"></path></svg>Sensor Publisher</button></a><a href="/builded-/docs/semaine-2/it/streamlit-dashboard/"><button data-slot="button" class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive bg-primary text-primary-foreground hover:bg-primary/90 h-9 px-4 py-2 has-[&gt;svg]:px-3">Streamlit Dashboard<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-right w-4 h-4 ml-2"><path d="M5 12h14"></path><path d="m12 5 7 7-7 7"></path></svg></button></a></div></div></div></main></div></div><!--$!--><template data-dgst="BAILOUT_TO_CLIENT_SIDE_RENDERING"></template><!--/$--><script src="/builded-/_next/static/chunks/webpack-1bc47428789b7fa5.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[99304,[\"7177\",\"static/chunks/app/layout-156dfeb232451b2a.js\"],\"ThemeProvider\"]\n3:I[95316,[\"7177\",\"static/chunks/app/layout-156dfeb232451b2a.js\"],\"ScrollIndicator\"]\n4:I[87555,[],\"\"]\n5:I[31295,[],\"\"]\n6:I[56095,[\"3775\",\"static/chunks/3775-b238f2da9e3bf1c9.js\",\"4345\",\"static/chunks/app/not-found-dc052bfc877ac7e8.js\"],\"default\"]\n7:I[23864,[\"7177\",\"static/chunks/app/layout-156dfeb232451b2a.js\"],\"Analytics\"]\n8:I[90894,[],\"ClientPageRoot\"]\n9:I[90922,[\"3775\",\"static/chunks/3775-b238f2da9e3bf1c9.js\",\"9567\",\"static/chunks/9567-6f13e14e3e2f5e9e.js\",\"2981\",\"static/chunks/2981-eb50beb4c5dc51c2.js\",\"1954\",\"static/chunks/1954-11af90ae075b3ce0.js\",\"3596\",\"static/chunks/app/docs/semaine-2/it/sensor-subscriber/page-f8ef32a2303138fc.js\"],\"default\"]\nc:I[59665,[],\"OutletBoundary\"]\nf:I[59665,[],\"ViewportBoundary\"]\n11:I[59665,[],\"MetadataBoundary\"]\n13:I[26614,[],\"\"]\n:HL[\"/builded-/_next/static/css/b15c17d40d707464.css\",\"style\"]\n:HL[\"/builded-/_next/static/css/153fc8fc778e61d8.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"Mx2XTxdJFnaet71lhbBbg\",\"p\":\"/builded-\",\"c\":[\"\",\"docs\",\"semaine-2\",\"it\",\"sensor-subscriber\",\"\"],\"i\":false,\"f\":[[[\"\",{\"children\":[\"docs\",{\"children\":[\"semaine-2\",{\"children\":[\"it\",{\"children\":[\"sensor-subscriber\",{\"children\":[\"__PAGE__\",{}]}]}]}]}]},\"$undefined\",\"$undefined\",true],[\"\",[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/builded-/_next/static/css/b15c17d40d707464.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"link\",\"1\",{\"rel\":\"stylesheet\",\"href\":\"/builded-/_next/static/css/153fc8fc778e61d8.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"suppressHydrationWarning\":true,\"children\":[\"$\",\"body\",null,{\"className\":\"font-sans antialiased\",\"children\":[[\"$\",\"$L2\",null,{\"attribute\":\"class\",\"defaultTheme\":\"system\",\"enableSystem\":true,\"disableTransitionOnChange\":true,\"children\":[[\"$\",\"$L3\",null,{}],[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"$L6\",null,{}],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],[\"$\",\"$L7\",null,{}]]}]}]]}],{\"children\":[\"docs\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"semaine-2\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"it\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"sensor-subscriber\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"__PAGE__\",[\"$\",\"$1\",\"c\",{\"children\":[[\"$\",\"$L8\",null,{\"Component\":\"$9\",\"searchParams\":{},\"params\":{},\"promises\":[\"$@a\",\"$@b\"]}],\"$undefined\",null,[\"$\",\"$Lc\",null,{\"children\":[\"$Ld\",\"$Le\",null]}]]}],{},null,false]},null,false]},null,false]},null,false]},null,false]},null,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$1\",\"be1U8vT62K-N82Kl6RIW8\",{\"children\":[[\"$\",\"$Lf\",null,{\"children\":\"$L10\"}],null]}],[\"$\",\"$L11\",null,{\"children\":\"$L12\"}]]}],false]],\"m\":\"$undefined\",\"G\":[\"$13\",\"$undefined\"],\"s\":false,\"S\":true}\n"])</script><script>self.__next_f.push([1,"a:{}\nb:{}\n"])</script><script>self.__next_f.push([1,"10:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\nd:null\n"])</script><script>self.__next_f.push([1,"e:null\n12:[[\"$\",\"title\",\"0\",{\"children\":\"TRC Competition Documentation\"}],[\"$\",\"meta\",\"1\",{\"name\":\"description\",\"content\":\"Documentation for TRC Robotics Competition - From Learning to Excellence\"}],[\"$\",\"meta\",\"2\",{\"name\":\"generator\",\"content\":\"v0.app\"}]]\n"])</script></body></html>